---
title: 进程，线程，事件循环与队列
date: 2023-07-08
categories:
  - Demos
tags:
    - JavaScript
---

## 背景

{% note info flat %}
最近看了一道前端的面试题，忽然发现了一个问题，事件循环的机制是怎么样的，那么队列呢？在了解相关文档之后，有涉及到了系统的进程与线程，在不同操作下延伸了线程的异步与同步，阻塞与非阻塞相关内容；
{% endnote %}

## 进程，线程是什么？

正常情况下，对于前端开发人员`进程，线程`并是不是必须学习的一块内容，对于这些内容只需要了解即可；

可以这样理解，就是对于不同的系统，不论是手机系统还是电脑系统，还是浏览器系统，都会分配一个可运行程序的内存，但是对于不同的应用程序，所占用的内存空间也是大小不一的；

就拿手机来讲，手机上会有微信，qq，王者荣耀等相关的应用软件，而对于这些应用程序是需要分配一个可运行的内存空间，而对于微信来讲，是在系统中的某一个进程，而这个进程是需要不同的子线程运行的，如：登录注册，聊天，购物等等；

![效果](https://qiniu.wangxiaoze.wang/hexo-blog/event-1.png)

而对于浏览器来讲：当打开浏览器，计算机会分配一个内存空间给到浏览器，而对于计算机来讲就是其中的一个进程，而这个进程涵盖着不同的线程；如下图，浏览器就是主线程，像一些GPU，渲染程序就是一些依附于主程序的线程；

![效果](https://qiniu.wangxiaoze.wang/hexo-blog/event-2.png)

而俩者的关系： **`线程是进程的子任务，是CPU调度和分派的基本单位，用于保证程序的时序性，实现进程内部的并发；`**

![效果](https://qiniu.wangxiaoze.wang/hexo-blog/event-3.png)

**`线程是实现异步的一个方式，对于浏览器需要不同线程开辟不同虚拟空间处理对应的操作，不会因为等待其中一个任务执行完毕之后再去执行其他的线程；`**

思考：那么如果所有的线程都要等待上一个线程的执行成功才会继续执行，会导致一个什么结果？

## 同步与异步

先来简单讲一下俩者的区别：

- [x] 同步: 同步就是顺序执行，执行完一个再执行下一个，需要等待、协调运行。
- [x] 异步: 与同步相对，不需要等待，彼此之间都是独立的，在等待某事件的过程中继续做自己的事，不需要等待这一事件完成之后再工作；

对于俩者区别的理解可参考如下图，切记`同步会导致线程的阻塞, 如下图图三`

![同步与异步，异步会造成线程阻塞](https://qiniu.wangxiaoze.wang/hexo-blog/event-4.png)

## 事件循环与队列

为了更清楚的理解`事件循环与队列`，这一块内容将采用原型图的方式展示：

### 队列

![队列](https://qiniu.wangxiaoze.wang/hexo-blog/event-5.png)

### 事件循环

> 切记事件循环的执行顺序，优先级从高至低为：全局 > 微队列 > 交互队列 > 延迟队列,具体执行顺序可参考如下图：
>

![事件循环](https://qiniu.wangxiaoze.wang/hexo-blog/event-6.png)
