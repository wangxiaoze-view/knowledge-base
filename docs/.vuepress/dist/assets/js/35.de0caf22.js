(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{352:function(t,a,s){"use strict";s.r(a);var n=s(4),e=Object(n.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),a("p",[t._v("💡 跨端的概念已经清楚了，之前多套代码维护多端系统，导致不同的兼容，性能需要不同维护；开发多套一致的功能是比较浪费时间，也是不合理的；")]),t._v(" "),a("p",[a("strong",[t._v("以下案例涉及到公司的一些方案以及项目图片，仅个人查看；")])])]),t._v(" "),a("h2",{attrs:{id:"跨端的概念以及场景"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#跨端的概念以及场景"}},[t._v("#")]),t._v(" 跨端的概念以及场景")]),t._v(" "),a("p",[t._v("如果一个系统能在不同设备上显示，并且始终维护一套代码，后期的开发效果与维护更加迅速，加快效率；即：一套微信小程序的电商系统（类似淘宝，京东），涉及到下单，购物车，支付，发货等等，以及后期的客服；较为庞大的系统中如何统一规范，一套代码实现多端处理，样式以及界面不会有太大的突出？")]),t._v(" "),a("p",[t._v("这里引入一个新的概念 跨端， 跨端技术对于前端来讲还是蛮不错的，因为前端展示的页面形式都是一致的，如果不引入跨端，就会出现多个系统，多套代码维护与开发；从而导致项目过大，难以维护的后果；")]),t._v(" "),a("p",[a("code",[t._v("跨端")]),t._v("的应用场景还是比较多的，例如：一套 h5 的电商系统，打开网页进行登录再去下单，过程比较麻烦，可能有的用户就喜欢简单的操作，那好，开发小程序，不需要你登录，不需要你输入网址打开网页就可以操作，还有可能有的用户喜欢用支付宝，那好，开发支付宝小程序；就相当于一条主路添加了俩条辅路，总有一条是比较方便的；")]),t._v(" "),a("p",[a("code",[t._v("跨端")]),t._v("亦是如此；现在的技术更新较快，对于前端开发来讲需要在短时间内开发一套兼容多端系统，那我认为跨端是最合适的了；")]),t._v(" "),a("p",[t._v("现在前端行业针对于 跨端也是有很多框架的:")]),t._v(" "),a("ul",[a("li",[t._v("App 的跨端不仅局限于原生的 Android 和 Ios, 对于 react-native 来讲既可以开发 android 也可以开发 ios, 并且运用的技术还是前端的 react;")]),t._v(" "),a("li",[t._v("另外 App 和 Web 的跨端还有 google 的 Flutter, 同样和上面一样, 一套代码开发 android 和 ios,但由于语法是基于 dart 开发的，上手难度较大；")]),t._v(" "),a("li",[t._v("前端 h5 的跨端，那就是小程序和 h5 网页了；现在使用最多的框架那就是 uni-app 和 Taro 了；")])]),t._v(" "),a("p",[t._v("接下来， 将会进行一个测试性的实践方式；")]),t._v(" "),a("p",[t._v("俩种跨端技术均采用有赞的 vant 框架，而 vant 有默认 h5 开发的框架，也有一个小程序的框架；")]),t._v(" "),a("h2",{attrs:{id:"taro-的使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#taro-的使用"}},[t._v("#")]),t._v(" Taro 的使用")]),t._v(" "),a("h3",{attrs:{id:"taro-是什么"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#taro-是什么"}},[t._v("#")]),t._v(" Taro 是什么?")]),t._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[t._v("注意")]),t._v(" "),a("p",[t._v("Taro 是一个开放式跨端的解决方案， 支持使用 react-native/vue/nerv 等框架来开发微信/京东/百度/支付宝/字节跳动/QQ/飞书/小程序/H5/RN 等应用；")])]),t._v(" "),a("blockquote",[a("p",[t._v("现如今市面上端的形态多种多样，Web、React Native、微信小程序等各种端大行其道。当业务要求同时在不同的端都要求有所表现的时候，针对不同的端去编写多套代码的成本显然非常高，这时候只编写一套代码就能够适配到多端的能力就显得极为需要。")])]),t._v(" "),a("h3",{attrs:{id:"安装使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装使用"}},[t._v("#")]),t._v(" 安装使用")]),t._v(" "),a("p",[t._v("对于首次安装 Taro 的前端来讲，Taro 官网文档并不完善，首次安装出现了大大小小的错误，")]),t._v(" "),a("ul",[a("li",[t._v("在使用 taro doctor 来检测项目是否可运行的情况下， 出现版本不一致，需要安装相对于的版本")]),t._v(" "),a("li",[t._v("配置文件不正确")]),t._v(" "),a("li",[t._v("安装过程中出现 sass 相关的错误， 还需要安装")])]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-g")]),t._v(" mirror-config-china\n")])])]),a("ul",[a("li",[t._v("等等其他一系列的大大小小的问题；")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://qiniu.wangxiaoze.wang/hexo-blog/image_kd_d.png",alt:"Install"}})]),t._v(" "),a("h3",{attrs:{id:"运行以及-package-json"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#运行以及-package-json"}},[t._v("#")]),t._v(" 运行以及 package.json")]),t._v(" "),a("p",[t._v("既然是跨端， 肯定涉及到的 npm 命令是比较多的， 命令如下:")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://qiniu.wangxiaoze.wang/hexo-blog/image_q_t_1.png",alt:"Service"}})]),t._v(" "),a("p",[t._v("运行 H5 是没问题的， 运行成功之后如下显示 Hello world")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://qiniu.wangxiaoze.wang/hexo-blog/image__kd_1.png",alt:"Service"}})]),t._v(" "),a("p",[t._v("但是运行 wapp 出现一个问题，就是 node-sass 的为问题")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 会出现一个这样的报错；")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Error")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("errors"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("unsupportedEnvironment")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("需要安装该相对应的 node-sass 版本 "),a("a",{attrs:{href:"https://github.com/sass/node-sass/releases/tag/v4.14.1",target:"_blank",rel:"noopener noreferrer"}},[t._v("解决方案,"),a("OutboundLink")],1),t._v(" 尝试运行 cnpm install node-sass；")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://qiniu.wangxiaoze.wang/hexo-blog/image__kd_2.png",alt:"Service"}})]),t._v(" "),a("p",[t._v("接着打包 weapp 打包成功之后会在 dist 目录生成大大小小的文件，接着用微信开发者工具打开，会发现有报错提示：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("SVGElement is not defined\n")])])]),a("p",[t._v("在 github 找了一下更新日志才知道")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://qiniu.wangxiaoze.wang/hexo-blog/image_kd_3.png",alt:"Service"}})]),t._v(" "),a("p",[t._v("我本地安装的是旧版本， 而这个问题在新版本修复的， 所以将本地当前的项目升级最新版本;")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("taro update self  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 是将当前的项目升级")]),t._v("\ntaro update project "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 将全局的版本升级，及所有的taro项目")]),t._v("\n\n")])])]),a("p",[t._v("重新 build 又出现一个报错:")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("找不到依赖 "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@tarojs/plugin-platform-weapp"')]),t._v("，请先在项目中安装\n\n")])])]),a("p",[t._v("没办法， 接着将项目更新，框架更新 包安装完善之后，打包 weapp 是可以的，开发工具打开之后又出现")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("TypeError")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Object")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" is not a "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v("\n")])])]),a("p",[t._v("....好吧，放弃了！")]),t._v(" "),a("p",[t._v("安装过程中，出现的问题太多了，文档说明也不详细，出现稀奇古怪的问题；")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://juejin.cn/post/7080176600704090143#heading-2",target:"_blank",rel:"noopener noreferrer"}},[t._v("跨端实践 | Taro 框架中该如何使用 Vant 组件库-适配多端"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("font",{attrs:{color:"red"}},[t._v("不操作了， 中间出现的问题太多了，文档说明也不够详细，出现包版本冲突的问题本就是让人头疼的，有点浪费时间， 时间不够充足，时间充足的话后期可以研究一下；")])],1),t._v(" "),a("h2",{attrs:{id:"uniapp"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#uniapp"}},[t._v("#")]),t._v(" uniapp")]),t._v(" "),a("p",[t._v("通过命令 "),a("code",[t._v("vue create -p dcloudio/uni-preset-vue my-project")]),t._v(" 使用默认模板。\n项目安装成功之后，通过命令 "),a("code",[t._v("yarn run dev:h5 和 yarn run dev:mp-weixin")]),t._v("启动 h5 和打包微信小程序, 在微信开发者工具中打开 "),a("code",[t._v("dist dev/map-weixin")])]),t._v(" "),a("p",[t._v("不过这里 h5 是可以正常打开的。 但是微信是报错的， 配置好 appid, 将项目目录的 vue.config.js 中的俩行代码删除或者注释掉：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("process"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("UNI_USING_VUE3")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nprocess"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("UNI_USING_VUE3_OPTIONS_API")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("重新编译就可以打开了；\n在 vant weapp 官网 右上角 github 下载源码，将 dist 命名为 vant 存放于与 pages 目录平行的 wxcomponents 目录下")]),t._v(" "),a("p",[t._v("在 pages.json 中配置一下命令：")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"globalStyle"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"navigationBarTextStyle"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"black"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"navigationBarTitleText"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"uni-app"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"navigationBarBackgroundColor"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"#F8F8F8"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"backgroundColor"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"#F8F8F8"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 代码在这里")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"usingComponents"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"van-button"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/wxcomponents/vant/button/index"')]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("App.vue 中引入 vant 的样式")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("style"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*每个页面公共css */")]),t._v(" @"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/wxcomponents/vant/common/index.wxss'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("style"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),a("p",[t._v("到这里为止，小程序是可以正常运行的， 而在 h5 会有样式引入乱码， 找到 icon 组件， 将样式格式化之后就可以运行了；")]),t._v(" "),a("h3",{attrs:{id:"写一个-op-的页面-同时兼容小程序和-h5"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#写一个-op-的页面-同时兼容小程序和-h5"}},[t._v("#")]),t._v(" 写一个 oP 的页面，同时兼容小程序和 h5")]),t._v(" "),a("blockquote",[a("p",[t._v("既然想要兼容俩个不同的端， 那么就要将原有的写法修改一下；")])]),t._v(" "),a("ol",[a("li",[t._v("div 换成 view")]),t._v(" "),a("li",[t._v("img 换成 image")]),t._v(" "),a("li",[t._v("span 换成 text")]),t._v(" "),a("li",[t._v("...")]),t._v(" "),a("li",[t._v("vant 框架 获取 v-modal 换成 value; 获取值， event.detail;")]),t._v(" "),a("li",[t._v("axios 请求在 h5 可以正常访问, 小程序不可以；")]),t._v(" "),a("li",[t._v("页面跳转；")])]),t._v(" "),a("h3",{attrs:{id:"效果预览"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#效果预览"}},[t._v("#")]),t._v(" 效果预览")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://qiniu.wangxiaoze.wang/hexo-blog/image_kd_4.png",alt:"1"}}),t._v(" "),a("img",{attrs:{src:"https://qiniu.wangxiaoze.wang/hexo-blog/image_kd_5.png",alt:"1"}}),t._v(" "),a("img",{attrs:{src:"https://qiniu.wangxiaoze.wang/hexo-blog/image_kd_6.png",alt:"1"}})]),t._v(" "),a("h3",{attrs:{id:"可能会遇到的问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#可能会遇到的问题"}},[t._v("#")]),t._v(" 可能会遇到的问题；")]),t._v(" "),a("blockquote",[a("p",[t._v("由于时间不太够，目前没有考虑太多的东西，既然是跨端，肯定会存在兼容问题；")])]),t._v(" "),a("p",[t._v("目前需要考虑的问题:")]),t._v(" "),a("ol",[a("li",[t._v("页面样式单位的选择")]),t._v(" "),a("li",[t._v("axios 和 uni.request() 结合封装?")]),t._v(" "),a("li",[t._v("至少兼容至： 微信小程序，pc 页面和 h5 页面； 保证在手机微信和企业微信移动端和 pc 端打开，稳定运行；")]),t._v(" "),a("li",[t._v("listView 的兼容，配套下拉刷新上拉加载")]),t._v(" "),a("li",[t._v("登录授权功能；目前存在疑惑，h5 授权的是公众号，小程序授权的呢?")]),t._v(" "),a("li",[t._v("涉及到后期支付问题，openId 的获取？如何在不同端拿到 openId?")]),t._v(" "),a("li",[t._v("登录授权？如何做？按钮提示还是初始页面提示?")]),t._v(" "),a("li",[t._v("其他...")])]),t._v(" "),a("h3",{attrs:{id:"后期需要考虑的问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#后期需要考虑的问题"}},[t._v("#")]),t._v(" 后期需要考虑的问题")]),t._v(" "),a("ul",[a("li",[t._v("现在是欧派一套系统，西门子一套系统， 后期？？？")]),t._v(" "),a("li",[t._v("不同商家合作商入口？是否可以做成一套？")]),t._v(" "),a("li",[t._v("如果做成一套，如何在不同场景更好的展示，且改动较少；")]),t._v(" "),a("li",[t._v("如果做配置话管理，是否存在缺陷 以及不足；涉及到（样式，主题色，布局等等）；")])])])}),[],!1,null,null,null);a.default=e.exports}}]);