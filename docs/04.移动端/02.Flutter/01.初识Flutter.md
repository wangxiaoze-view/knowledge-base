---
title: åˆè¯†Flutter
date: 2024-04-14 20:29:17
permalink: /pages/b94f8b/
---

::: tip
ğŸ’¡ æœ‰å…³ Flutter çš„ä»‹ç»ï¼Œåœ¨è¿™é‡Œå°±ä¸åšè¿‡å¤šçš„æè¿°ï¼›å…·ä½“ä»‹ç»è¯·ç§»æ­¥è‡³å®˜ç½‘é˜…è¯»ï¼›æœ¬æ–‡ä»…ä»…ä½œä¸ºæ—¥å¸¸å­¦ä¹ è®°å½•ï¼›
:::

## æ¨¡å—ä»£ç è§£æ

### å¯¼å…¥åŒ…

> Flutter é»˜è®¤æä¾›äº†ä¸€å¥— Material é£æ ¼çš„ UI ç»„ä»¶åº“ï¼›

```dart
import 'package:flutter/material.dart';
```

### åº”ç”¨å…¥å£

> main æ–¹æ³•æ˜¯ç”¨äº†ç®­å¤´å‡½æ•°ï¼Œå¯ä»¥ç†è§£ä¸ºå‰ç«¯çš„ç®­å¤´å‡½æ•°ï¼›

```dart
void main() => runApp(const MyApp());
```

### åº”ç”¨ç»“æ„

```dart
class MyApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      // åº”ç”¨åç§°
      title: 'Study To Flutter',
      theme: ThemeData(
        // è“è‰²ä¸»é¢˜
        primarySwatch: Colors.blue,
      ),
      // åº”ç”¨é¦–é¡µç»„ä»¶
      home: MyHomePage(title: 'Flutter Demo Home Page'),
    );
  }
}
```

- MyApp æ³ªä»£è¡¨ç€ Flutter çš„åº”ç”¨ï¼Œç»§æ‰¿è‡ª StatelessWidget ç±»ï¼Œä¹Ÿå°±æ˜¯æ„å‘³ç€å®ƒä¹Ÿæ˜¯ä¸€ä¸ª Widget ç»„ä»¶
- è€Œåœ¨ Flutter ä¸­ï¼Œä»»ä½•å°éƒ¨ä»¶éƒ½æ˜¯ä¸€ä¸ª Widgetï¼›
- åœ¨è°ƒç”¨åº”ç”¨æ—¶ï¼Œä¼šå‡ºå‘ build æ–¹æ³•ï¼Œä»è€Œæ„å»ºåº”ç”¨çš„ UIï¼›
- MaterialApp æ˜¯ Flutter Materil æä¾›çš„é»˜è®¤çš„ App çš„æ¡†æ¶ï¼ŒåŒæ—¶ä¹Ÿæ˜¯ä¸€ä¸ª Widgetï¼›
- MyHomePage æ˜¯åº”ç”¨çš„é¦–é¡µï¼ŒåŒæ˜¯ä¹Ÿæ˜¯ä¸€ä¸ª Widgetï¼›

## é¦–é¡µ

### Widget åˆè¯†

```dart
class MyHomePage extends StatefulWidget {
  MyHomePage({Key? key, required this.title}) : super(key: key);
  final String title;

  @override
  _MyHomePageState createState() => _MyHomePageState();
}

class _MyHomePageState extends State<MyHomePage> {}
```

> Widget ä¸»è¦åˆ†ä¸ºä¿©å¤§ç±»ï¼š

1. StatefullWidgetï¼š æœ‰çŠ¶æ€çš„ç»„ä»¶ï¼›å¯ä»¥æ‹¥æœ‰çŠ¶æ€ï¼Œåœ¨ Widget ç”Ÿå‘½å‘¨æœŸä¸­è¿™äº›çŠ¶æ€æ˜¯å¯ä»¥æ”¹å˜çš„ï¼›
2. StateLessWidgetï¼šæ— çŠ¶æ€çš„ç»„ä»¶ï¼›æ²¡æœ‰ä»»ä½•çŠ¶æ€ï¼Œåœ¨ Widget ç”Ÿå‘½å‘¨æœŸä¸­çŠ¶æ€ä¸èƒ½æ”¹å˜ï¼›

> StatefullWidget æœ‰ä¿©ä¸ªç±»ç»„æˆï¼š

1. StatefullWidget ç±»
2. State ç±»ï¼ŒStatefullWidget æœ¬èº«ä¸ä¼šå‘ç”Ÿå˜åŒ–ï¼Œè€Œ State ä¼šè·Ÿç€ Widget çš„ç”Ÿå‘½å‘¨æœŸå‘ç”Ÿå˜åŒ–ï¼›

### State ç±»

> State ç±»å¯ä»¥å­˜å‚¨ä¸€äº›å€¼çš„çŠ¶æ€ï¼Œæ¯”å¦‚è®¡æ•°å™¨ï¼šint \_count = 0;

#### ç»„ä»¶çš„çŠ¶æ€ï¼šè®¡æ•°å™¨

```dart

// å®šä¹‰ä¸€ä¸ªå¯ä»¥æ”¹å˜Stateåˆå§‹å€¼ä¸º_countçš„æ–¹æ³•
void _addCount() {
 setState((){
   _count++;
 })
}
```

å½“æŒ‰é’®ç‚¹å‡»æ˜¯ï¼Œä¼šå‡ºå‘ä¸€ä¸ª\_addCount()å‡½æ•°ï¼Œä»è€Œå°† State ä¸­çš„\_count çš„åˆå§‹å€¼è‡ªå¢ï¼›å½“çŠ¶æ€å‘ç”Ÿæ”¹å˜åï¼ŒFlutter æ”¶åˆ°å‘ç”Ÿæ”¹å˜çš„é€šçŸ¥ï¼Œä»è€Œé€šè¿‡ buid å‡½æ•°é‡æ–°æ¸²æŸ“ UI ç•Œé¢ï¼Œå³æ›´æ–°è§†å›¾ï¼›

#### æ„å»º UIï¼Œbuild æ„å»º

æ„å»º UI ç•Œé¢çš„é€»è¾‘åœ¨ build æ–¹æ³•ä¸­ï¼Œå½“ MyHomePage ç¬¬ä¸€æ¬¡åˆ›å»ºæ—¶ï¼Œ\_MyHomePageState ç±»ä¼šè¢«åˆ›å»ºï¼Œå½“åˆå§‹åŒ–å®Œæˆåï¼ŒFlutter æ¡†æ¶ä¼šè°ƒç”¨ widget çš„ build æ–¹æ³•æ¥æ„å»º widget æ ‘ï¼Œæœ€ç»ˆå°† widget æ ‘æ¸²æŸ“åˆ°è®¾å¤‡å±å¹•ä¸Šã€‚

è®¡æ•°å™¨æ¡ˆä¾‹ï¼šå½“ç‚¹å‡»æŒ‰é’®ä¹‹åï¼Œä¼šå‡ºå‘æ”¹å˜åˆå§‹å€¼çŠ¶æ€çš„æ–¹æ³•ï¼Œè®©åˆå§‹å€¼è‡ªå¢ï¼ŒFLutter æ”¶åˆ°çŠ¶æ€åªæ›´æ–°çš„é€šçŸ¥ï¼Œä¼šé€šè¿‡ build çš„æ–¹æ³•å°†è§†å›¾è¿›è¡Œæ›´æ–°ï¼Œé‡æ„å½“å‰è§†å›¾ï¼›
å¯å‚è€ƒä»¥ä¸‹ä»£ç ï¼š

```dart
// å¼•å…¥åŒ…
import 'package:flutter/material.dart';
// å…¥å£å‡½æ•°
void main(List<String> args) {
  runApp(const MyApp());
}
// myapp ç»§æ‰¿ statelesswidgetç±»ï¼Œ
class MyApp extends StatelessWidget {
  const MyApp({Key? key}) : super(key: key);

  // build é»˜è®¤materialappæ¡†æ¶
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: "study to flutter",
      theme: ThemeData(primaryColor: Colors.greenAccent),
      // æ„å»ºä¸»é¡µé¦–é¡µï¼›
      home: const MyHomePage(),
    );
  }
}

// myhomepageç»§æ‰¿statefullwidgetæœ‰çŠ¶æ€çš„ç±»
class MyHomePage extends StatefulWidget {
  const MyHomePage({Key? key}) : super(key: key);

  @override
  State<MyHomePage> createState() => _MyHomePageState();
}

class _MyHomePageState extends State<MyHomePage> {
  // å®šä¹‰æ–‡æœ¬åˆå§‹å€¼ï¼Œæœ‰çŠ¶æ€çš„å­—ç¬¦
  String _string = "åˆå§‹åŒ–çš„ğŸ“„";
  // å®šä¹‰æŒ‰é’®ç‚¹å‡»toggle  ç”¨äºæ”¹å˜æ–‡æœ¬çš„é»˜è®¤å€¼
  bool _bool = false;

  // è°ƒç”¨buildï¼Œæ„å»ºè§†å›¾
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: const Text("é¦–é¡µ"),
        centerTitle: true,
      ),
      body: Column(
        children: [
          // åˆå§‹åŒ–çš„æ–‡æœ¬å€¼
          Text(_string),
          // æ–‡æœ¬æŒ‰é’®
          TextButton(
            // ç‚¹å‡»ä¹‹åä¿®æ”¹ çŠ¶æ€å€¼ï¼Œ æ„å»ºæ˜¾ç¤ºï¼›
            onPressed: () {
              setState(() {
                if (!_bool) {
                  _string = "ç‚¹å‡»æŒ‰é’®å‘ç”Ÿäº†æ”¹å˜ï¼ï¼ï¼";
                } else {
                  _string = "åˆå§‹åŒ–çš„ğŸ“„";
                }
                _bool = !_bool;
              });
            },
            child: const Text('ç‚¹å‡»æŒ‰é’®Textæ–‡æœ¬ä¼šå‘ç”Ÿæ”¹å˜ï¼'),
          )
        ],
      ),
    );
  }
}
```

#### build çš„æ–¹æ³•ä¸ºä»€ä¹ˆä¼šåœ¨ state ä¸­ï¼Œè€Œä¸æ˜¯ statefullwidgetï¼Ÿ

- çŠ¶æ€çš„è®¿é—®ä¸æ–¹ä¾¿
  å¦‚æœ statefullwidget å­˜åœ¨å¾ˆå¤šçš„çŠ¶æ€ï¼Œæ¯æ¬¡çŠ¶æ€å‘ç”Ÿæ”¹å˜éƒ½ä¼šè°ƒç”¨ build å»é‡æ„è§†å›¾ï¼Œæ„å»ºçš„æ„æˆä¾èµ– stateï¼Œå¦‚æœæ”¾åœ¨ statefullwidget æ¯æ¬¡æ„å»ºéƒ½ä¼šä¼ ä¸€ä¸ª state çš„å€¼ï¼Œå°† state çš„å€¼è¿›è¡Œä¿®æ”¹ï¼›

```dart
Widget build(BuildContext context, State state){}
```

- ç»§æ‰¿ statefullwidget ä¸æ–¹ä¾¿ï¼›

## å‚è€ƒæ–‡çŒ®

[ä¸ºä»€ä¹ˆè¦å°† build æ–¹æ³•æ”¾åœ¨ State ä¸­ï¼Œè€Œä¸æ˜¯æ”¾åœ¨ StatefulWidget ä¸­ï¼Ÿ](https://book.flutterchina.club/chapter2/first_flutter_app.html#_2-1-2-%E9%A6%96%E9%A1%B5)
