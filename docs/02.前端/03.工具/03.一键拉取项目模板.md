---
title: 一键拉取项目模板
date: 2024-04-12 22:15:48
permalink: /pages/8902c3/
---

工作了将近 5 年的我，对于重复性的工作还是很枯燥的，就像是一个机器人似的重复之前的工作；

但同时重复性的工作也会浪费我的一部分时间，那如何减少重复的工作呢？

对于公司新开的项目，基本都是从之前的项目复制一份在修改修改成为一份新的系统项目；公司的项目不是说只有那么一个俩个项目，是一堆项目；

有`pc, uni-app, h5, app, 小程序`等等，那我们一直重复复制粘贴的工作，有没有一种方式可以减少重复的工作呢？

当然是有的，就是把这些项目简单的模板化，然后通过命令行工具，一键拉取项目模板，然后修改一下配置，就可以直接拉取项目了；

1. 创建一个项目模板仓库，将项目模板放到仓库中；
2. 创建一个项目模板拉取工具，通过命令行工具，拉取项目模板；
3. 创建一个项目模板配置文件，用于配置项目模板的配置信息；

想要开发一款工具，那么就要一些基础知识，比如：`node, js，git`等等；

```js
#!/usr/bin/env node

const program = require("commander");
const { handlerHelp, isExistFileName } = require("./handler");

program
  // 显示版本号
	.version(require("../package.json").version, "-v, --version")
  // 帮助信息
	.on("--help", handlerHelp)
  // 创建项目命令
	.command("create <name>")
	.action(async name => {、
    // 操作代码
		await isExistFileName(name);
	});
program.parse(process.argv);
```

我们基础项目的配置文件信息：

```js
const abk_temp_config = [
	{
		name: "Pc(vue3 + Element-Plus + abk内部使用)",
		url: "http://xxx.git",
		checkout: "pc-admin-template", // 对应仓库的分支
	},
	{
		name: "H5(vue3 + vant + abk内部使用)",
		url: "http://xxx.git",
		checkout: "h5-template",
	},
];
```

如何克隆项目模板呢？

```js
const child_process = require("child_process");

child_process.exec(`git clone -b 分支名 分支地址 项目名`, (error, stdout) => {
	if (error) {
		// 错误信息
		return;
	}

	if (fs.existsSync("文件目录名称")) {
		fs.writeFileSync("文件名", "文件内容");
	}
});
```

这样的话我们就可以通过`git clone 命令`克隆配置信息中的分支了；

## 效果预览

![1](https://raw.githubusercontent.com/wangxiaoze-view/temp-pro/HEAD/p_1.png)
![2](https://raw.githubusercontent.com/wangxiaoze-view/temp-pro/HEAD/p_2.png)
![3](https://raw.githubusercontent.com/wangxiaoze-view/temp-pro/HEAD/p_3.png)

## 代码地址

- [代码 Github](https://github.com/wangxiaoze-view/temp-pro/tree/main)
- [如何安装使用](https://www.npmjs.com/package/temp-pro)
